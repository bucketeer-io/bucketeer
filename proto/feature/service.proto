// Copyright 2026 The Bucketeer Authors.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

syntax = "proto3";

package bucketeer.feature;
option go_package = "github.com/bucketeer-io/bucketeer/v2/proto/feature";

import "google/api/annotations.proto";
import "google/api/field_behavior.proto";
import "google/protobuf/wrappers.proto";
import "protoc-gen-openapiv2/options/annotations.proto";

import "proto/common/string.proto";
import "proto/feature/command.proto";
import "proto/feature/feature.proto";
import "proto/feature/scheduled_update.proto";
import "proto/feature/evaluation.proto";
import "proto/feature/feature_last_used_info.proto";
import "proto/user/user.proto";
import "proto/feature/segment.proto";
import "proto/feature/flag_trigger.proto";
import "proto/feature/variation.proto";
import "proto/feature/prerequisite.proto";
import "proto/feature/rule.proto";
import "proto/feature/strategy.proto";
import "proto/feature/target.proto";

message GetFeatureRequest {
  string id = 1 [(google.api.field_behavior) = REQUIRED];
  reserved 2;
  string environment_id = 3 [(google.api.field_behavior) = REQUIRED];
  google.protobuf.Int32Value feature_version = 4
      [(grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
        description: "If not set, it will return the latest version."
      }];
}

message GetFeatureResponse {
  Feature feature = 1;
}

message GetFeaturesRequest {
  reserved 1;
  repeated string ids = 2;
  string environment_id = 3;
}

message GetFeaturesResponse {
  repeated Feature features = 1;
}

message ListFeaturesRequest {
  enum OrderBy {
    DEFAULT = 0;
    NAME = 1;
    CREATED_AT = 2;
    UPDATED_AT = 3;
    TAGS = 4;
    ENABLED = 5;
    AUTO_OPS = 6;
  }
  enum OrderDirection {
    ASC = 0;
    DESC = 1;
  }
  int64 page_size = 1;
  string cursor = 2;
  repeated string tags = 3;
  OrderBy order_by = 4;
  OrderDirection order_direction = 5;
  reserved 6;
  string maintainer = 7;
  google.protobuf.BoolValue enabled = 8;
  google.protobuf.BoolValue has_experiment = 9;
  string search_keyword = 10;
  google.protobuf.BoolValue archived = 11;
  google.protobuf.BoolValue has_prerequisites = 12;
  string environment_id = 13 [(google.api.field_behavior) = REQUIRED];
  FeatureLastUsedInfo.Status status = 14;
  google.protobuf.BoolValue has_feature_flag_as_rule = 15;
}

message FeatureSummary {
  int32 total = 1;
  int32 active = 2;
  int32 inactive = 3;
}

message ListFeaturesResponse {
  repeated Feature features = 1;
  string cursor = 2;
  int64 total_count = 3;
  FeatureSummary feature_count_by_status = 4;
}

message ListEnabledFeaturesRequest {
  int64 page_size = 1;
  string cursor = 2;
  repeated string tags = 3;
  reserved 4;
  string environment_id = 5;
}

message ListEnabledFeaturesResponse {
  repeated Feature features = 1;
  string cursor = 2;
}

message CreateFeatureRequest {
  CreateFeatureCommand command = 1 [
    deprecated = true,
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
      description: "deprecated"
    }
  ];
  reserved 2;
  string environment_id = 3 [(google.api.field_behavior) = REQUIRED];
  string id = 4 [(google.api.field_behavior) = REQUIRED];
  string name = 5 [(google.api.field_behavior) = REQUIRED];
  string description = 6;  // This is an optional field
  repeated Variation variations = 7;
  repeated string tags = 8 [(google.api.field_behavior) = REQUIRED];
  google.protobuf.Int32Value default_on_variation_index = 9;
  google.protobuf.Int32Value default_off_variation_index = 10;
  Feature.VariationType variation_type = 11;
}

message CreateFeatureResponse {
  Feature feature = 1;
}

enum ChangeType {
  UNSPECIFIED = 0;
  CREATE = 1;
  UPDATE = 2;
  DELETE = 3;
}

message PrerequisiteChange {
  ChangeType change_type = 1 [(google.api.field_behavior) = REQUIRED];
  Prerequisite prerequisite = 2 [(google.api.field_behavior) = REQUIRED];
}

message TargetChange {
  ChangeType change_type = 1 [(google.api.field_behavior) = REQUIRED];
  Target target = 2 [(google.api.field_behavior) = REQUIRED];
}

message VariationChange {
  ChangeType change_type = 1 [(google.api.field_behavior) = REQUIRED];
  Variation variation = 2 [(google.api.field_behavior) = REQUIRED];
}

message RuleChange {
  ChangeType change_type = 1 [(google.api.field_behavior) = REQUIRED];
  Rule rule = 2 [(google.api.field_behavior) = REQUIRED];
}

message TagChange {
  ChangeType change_type = 1 [(google.api.field_behavior) = REQUIRED];
  string tag = 2 [(google.api.field_behavior) = REQUIRED];
}

message UpdateFeatureRequest {
  string comment = 1;
  string environment_id = 2 [(google.api.field_behavior) = REQUIRED];
  string id = 3 [(google.api.field_behavior) = REQUIRED];
  google.protobuf.StringValue name = 4;
  google.protobuf.StringValue description = 5;
  common.StringListValue tags = 6;
  google.protobuf.BoolValue enabled = 7;
  google.protobuf.BoolValue archived = 8;
  Strategy default_strategy = 9;
  google.protobuf.StringValue off_variation = 10;
  bool reset_sampling_seed = 11;
  bool apply_schedule_update = 12;
  repeated VariationChange variation_changes = 13;
  repeated RuleChange rule_changes = 14;
  repeated PrerequisiteChange prerequisite_changes = 15;
  repeated TargetChange target_changes = 16;
  repeated TagChange tag_changes = 17;
}

message UpdateFeatureResponse {
  Feature feature = 1;
}

message ScheduleFlagChangeRequest {
  string environment_id = 1 [(google.api.field_behavior) = REQUIRED];
  string feature_id = 2 [(google.api.field_behavior) = REQUIRED];
  int64 scheduled_at = 3 [(google.api.field_behavior) = REQUIRED];
  repeated ScheduledChange scheduled_changes = 4
      [(google.api.field_behavior) = REQUIRED];
}

message ScheduleFlagChangeResponse {}

message UpdateScheduledFlagChangeRequest {
  string environment_id = 1 [(google.api.field_behavior) = REQUIRED];
  string id = 2 [(google.api.field_behavior) = REQUIRED];
  google.protobuf.Int64Value scheduled_at = 3
      [(google.api.field_behavior) = REQUIRED];
  repeated ScheduledChange scheduled_changes = 4
      [(google.api.field_behavior) = REQUIRED];
}

message UpdateScheduledFlagChangeResponse {}

message DeleteScheduledFlagChangeRequest {
  string environment_id = 1 [(google.api.field_behavior) = REQUIRED];
  string id = 2 [(google.api.field_behavior) = REQUIRED];
}

message DeleteScheduledFlagChangeResponse {}

message ListScheduledFlagChangesRequest {
  string environment_id = 1 [(google.api.field_behavior) = REQUIRED];
  string feature_id = 2 [(google.api.field_behavior) = REQUIRED];
}

message ListScheduledFlagChangesResponse {
  repeated ScheduledFlagUpdate scheduled_flag_updates = 1;
}

message EnableFeatureRequest {
  string id = 1;
  EnableFeatureCommand command = 2;
  reserved 3;
  string comment = 4;
  string environment_id = 5;
}

message EnableFeatureResponse {}

message DisableFeatureRequest {
  string id = 1;
  DisableFeatureCommand command = 2;
  reserved 3;
  string comment = 4;
  string environment_id = 5;
}

message DisableFeatureResponse {}

message ArchiveFeatureRequest {
  string id = 1;
  ArchiveFeatureCommand command = 2;
  reserved 3;
  string comment = 4;
  string environment_id = 5;
}

message ArchiveFeatureResponse {}

message UnarchiveFeatureRequest {
  string id = 1;
  UnarchiveFeatureCommand command = 2;
  reserved 3;
  string comment = 4;
  string environment_id = 5;
}

message UnarchiveFeatureResponse {}

message DeleteFeatureRequest {
  string id = 1;
  DeleteFeatureCommand command = 2;
  reserved 3;
  string comment = 4;
  string environment_id = 5;
}

message DeleteFeatureResponse {}

message UpdateFeatureDetailsRequest {
  string id = 1;
  RenameFeatureCommand rename_feature_command = 2;
  ChangeDescriptionCommand change_description_command = 3;
  repeated AddTagCommand add_tag_commands = 4;
  repeated RemoveTagCommand remove_tag_commands = 5;
  reserved 6;
  string comment = 7;
  string environment_id = 8;
}

message UpdateFeatureDetailsResponse {}

message UpdateFeatureVariationsRequest {
  string id = 1;
  repeated Command commands = 2;
  reserved 3;
  string comment = 4;
  string environment_id = 5;
}

message UpdateFeatureVariationsResponse {}

message UpdateFeatureTargetingRequest {
  enum From {
    UNKNOWN = 0;
    USER = 1;
    OPS = 2;
  }
  string id = 1;
  repeated Command commands = 2;
  reserved 3;
  string comment = 4;
  From from = 5;
  string environment_id = 6;
}

message UpdateFeatureTargetingResponse {}

message CloneFeatureRequest {
  string id = 1;
  CloneFeatureCommand command = 2 [
    deprecated = true,
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
      description: "deprecated, use targetEnvironmentId instead"
    }
  ];
  reserved 3;
  string environment_id = 4;
  string target_environment_id = 5;
}

message CloneFeatureResponse {}

message CreateSegmentRequest {
  reserved 1;  // CreateSegmentCommand
  reserved 2;
  string name = 3 [(google.api.field_behavior) = REQUIRED];
  string environment_id = 4 [(google.api.field_behavior) = REQUIRED];
  string description = 5;
}

message CreateSegmentResponse {
  Segment segment = 1;
}

message GetSegmentRequest {
  string id = 1 [(google.api.field_behavior) = REQUIRED];
  reserved 2;
  string environment_id = 3 [(google.api.field_behavior) = REQUIRED];
}

message GetSegmentResponse {
  Segment segment = 1;
}

message ListSegmentsRequest {
  enum OrderBy {
    DEFAULT = 0;
    NAME = 1;
    CREATED_AT = 2;
    UPDATED_AT = 3;
    CONNECTIONS = 4;
    USERS = 5;
  }
  enum OrderDirection {
    ASC = 0;
    DESC = 1;
  }
  int64 page_size = 1;
  string cursor = 2;
  reserved 3;
  OrderBy order_by = 4;
  OrderDirection order_direction = 5;
  string search_keyword = 6;
  google.protobuf.Int32Value status = 7;
  google.protobuf.BoolValue is_in_use_status = 8;
  string environment_id = 9 [(google.api.field_behavior) = REQUIRED];
}

message ListSegmentsResponse {
  repeated Segment segments = 1;
  string cursor = 2;
  int64 total_count = 3;
}

message DeleteSegmentRequest {
  string id = 1;
  reserved 2;  // DeleteSegmentCommand
  reserved 3;
  string environment_id = 4;
}

message DeleteSegmentResponse {}

message UpdateSegmentRequest {
  string id = 1;
  reserved 2;  // repeated Command commands
  reserved 3;
  string environment_id = 4 [(google.api.field_behavior) = REQUIRED];
  google.protobuf.StringValue name = 5;
  google.protobuf.StringValue description = 6;
}

message UpdateSegmentResponse {
  Segment segment = 1;
}

message ListSegmentUsersRequest {
  int64 page_size = 1;
  string cursor = 2;
  string segment_id = 3;
  google.protobuf.Int32Value state = 4;
  string user_id = 5;
  reserved 6;
  string environment_id = 7;
}

message ListSegmentUsersResponse {
  repeated SegmentUser users = 1;
  string cursor = 2;
}

message BulkUploadSegmentUsersRequest {
  reserved 1;
  string segment_id = 2;
  reserved 3;  // BulkUploadSegmentUsersCommand
  string environment_id = 4;
  bytes data = 5
      [(grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
        description: "segment user ids separated by comma or new line"
      }];
  SegmentUser.State state = 6;
}

message BulkUploadSegmentUsersResponse {}

message BulkDownloadSegmentUsersRequest {
  reserved 1;
  string segment_id = 2 [(google.api.field_behavior) = REQUIRED];
  SegmentUser.State state = 3;
  string environment_id = 4 [(google.api.field_behavior) = REQUIRED];
}

message BulkDownloadSegmentUsersResponse {
  bytes data = 1;  // segment user ids separated by new line
}

message EvaluateFeaturesRequest {
  bucketeer.user.User user = 1 [(google.api.field_behavior) = REQUIRED];
  reserved 2;
  string tag = 3;
  string feature_id = 4;  // it will evaluate a single feature if set
  string environment_id = 5 [(google.api.field_behavior) = REQUIRED];
}

message EvaluateFeaturesResponse {
  bucketeer.feature.UserEvaluations user_evaluations = 1;
}

message DebugEvaluateFeaturesRequest {
  repeated bucketeer.user.User users = 1
      [(google.api.field_behavior) = REQUIRED];
  repeated string feature_ids = 3 [(google.api.field_behavior) = REQUIRED];
  string environment_id = 4 [(google.api.field_behavior) = REQUIRED];
}

message DebugEvaluateFeaturesResponse {
  repeated Evaluation evaluations = 1;
  repeated string archived_feature_ids = 2;
}

message ListTagsRequest {
  enum OrderBy {
    DEFAULT = 0;
    ID = 1;
    CREATED_AT = 2;
    UPDATED_AT = 3;
    NAME = 4;
  }
  enum OrderDirection {
    ASC = 0;
    DESC = 1;
  }
  reserved 1;
  int64 page_size = 2;
  string cursor = 3;
  OrderBy order_by = 4;
  OrderDirection order_direction = 5;
  string search_keyword = 6;
  string environment_id = 7;
}

message ListTagsResponse {
  repeated Tag tags = 1;
  string cursor = 2;
  int64 total_count = 3;
}

message CreateFlagTriggerRequest {
  reserved 1;
  CreateFlagTriggerCommand create_flag_trigger_command = 2 [
    deprecated = true,
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
      description: "deprecated"
    }
  ];
  string environment_id = 3 [(google.api.field_behavior) = REQUIRED];
  string feature_id = 4 [(google.api.field_behavior) = REQUIRED];
  FlagTrigger.Type type = 5 [(google.api.field_behavior) = REQUIRED];
  FlagTrigger.Action action = 6 [(google.api.field_behavior) = REQUIRED];
  string description = 7;
}

message CreateFlagTriggerResponse {
  FlagTrigger flag_trigger = 1;
  string url = 2;
}

message DeleteFlagTriggerRequest {
  string id = 1;
  reserved 2;
  DeleteFlagTriggerCommand delete_flag_trigger_command = 3 [
    deprecated = true,
    (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
      description: "deprecated"
    }
  ];
  string environment_id = 4;
}

message DeleteFlagTriggerResponse {}

message UpdateFlagTriggerRequest {
  string id = 1 [(google.api.field_behavior) = REQUIRED];
  reserved 2;
  string environment_id = 4 [(google.api.field_behavior) = REQUIRED];
  ChangeFlagTriggerDescriptionCommand change_flag_trigger_description_command =
      3 [
        deprecated = true,
        (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
          description: "deprecated"
        }
      ];
  google.protobuf.StringValue description = 5;
  bool reset = 6
      [(grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
        description: "If true, reset the trigger hook URL."
      }];
  google.protobuf.BoolValue disabled = 7
      [(grpc.gateway.protoc_gen_openapiv2.options.openapiv2_field) = {
        description: "If true, disable the trigger."
      }];
}

message UpdateFlagTriggerResponse {
  string url = 1 [(grpc.gateway.protoc_gen_openapiv2.options
                       .openapiv2_field) = {
    description: "If reset is true, new generated trigger hook URL will be returned."
  }];
}

message EnableFlagTriggerRequest {
  string id = 1;
  reserved 2;
  EnableFlagTriggerCommand enable_flag_trigger_command = 3;
  string environment_id = 4;
}

message EnableFlagTriggerResponse {}

message DisableFlagTriggerRequest {
  string id = 1;
  reserved 2;
  DisableFlagTriggerCommand disable_flag_trigger_command = 3;
  string environment_id = 4;
}

message DisableFlagTriggerResponse {}

message ResetFlagTriggerRequest {
  string id = 1;
  reserved 2;
  ResetFlagTriggerCommand reset_flag_trigger_command = 3;
  string environment_id = 4;
}

message ResetFlagTriggerResponse {
  FlagTrigger flag_trigger = 1;
  string url = 2;
}

message GetFlagTriggerRequest {
  string id = 1 [(google.api.field_behavior) = REQUIRED];
  reserved 2;
  string environment_id = 3 [(google.api.field_behavior) = REQUIRED];
}

message GetFlagTriggerResponse {
  FlagTrigger flag_trigger = 1;
  string url = 2;
}

message ListFlagTriggersRequest {
  enum OrderBy {
    DEFAULT = 0;
    CREATED_AT = 1;
    UPDATED_AT = 2;
  }
  enum OrderDirection {
    ASC = 0;
    DESC = 1;
  }
  string feature_id = 1;
  reserved 2;
  string cursor = 3;
  int32 page_size = 4;
  OrderBy order_by = 5;
  OrderDirection order_direction = 6;
  string environment_id = 7;
}

message ListFlagTriggersResponse {
  message FlagTriggerWithUrl {
    FlagTrigger flag_trigger = 1;
    string url = 2;
  }
  repeated FlagTriggerWithUrl flag_triggers = 1;
  string cursor = 2;
  int64 total_count = 3;
}

message FlagTriggerWebhookRequest {
  string token = 1;
}

message FlagTriggerWebhookResponse {}

message GetUserAttributeKeysRequest {
  string environment_id = 1 [(google.api.field_behavior) = REQUIRED];
}

message GetUserAttributeKeysResponse {
  repeated string user_attribute_keys = 1;
}

service FeatureService {
  rpc GetFeature(GetFeatureRequest) returns (GetFeatureResponse) {
    option (google.api.http) = {
      get: "/v1/feature"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      summary: "Get Feature Flag",
      description: "Get a feature flag. To call this API, you need at least a MEMBER role in the specified organizations.",
      tags: "Feature",
      operation_id: "web.v1.feature.get",
      responses: {
        key: "400"
        value: {
          description: "Returned for bad requests that may have failed validation."
          schema: { json_schema: { ref: ".google.rpc.Status" } }
          examples: {
            key: "application/json"
            value: '{ "code": 3, "message": "invalid arguments error", "details": [] }'
          }
        }
      }
      responses: {
        key: "401"
        value: {
          description: "Request could not be authenticated (authentication required)."
          schema: { json_schema: { ref: ".google.rpc.Status" } }
          examples: {
            key: "application/json"
            value: '{ "code": 16, "message": "not authenticated", "details": [] }'
          }
        }
      }
      responses: {
        key: "403"
        value: {
          description: "Request does not have permission to access the resource."
          schema: { json_schema: { ref: ".google.rpc.Status" } }
          examples: {
            key: "application/json"
            value: '{ "code": 7, "message": "not authorized", "details": [] }'
          }
        }
      }
      responses: {
        key: "404"
        value: {
          description: "Returned when the resource is not found."
          schema: { json_schema: { ref: ".google.rpc.Status" } }
          examples: {
            key: "application/json"
            value: '{ "code": 5, "message": "not found", "details": [] }'
          }
        }
      }
    };
  }
  rpc GetFeatures(GetFeaturesRequest) returns (GetFeaturesResponse) {}
  rpc ListFeatures(ListFeaturesRequest) returns (ListFeaturesResponse) {
    option (google.api.http) = {
      get: "/v1/features"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      summary: "List Feature Flags",
      description: "List feature flags. To call this API, you need at least a MEMBER role in the specified organizations.",
      tags: "Feature",
      operation_id: "web.v1.feature.list",
      responses: {
        key: "400"
        value: {
          description: "Returned for bad requests that may have failed validation."
          schema: { json_schema: { ref: ".google.rpc.Status" } }
          examples: {
            key: "application/json"
            value: '{ "code": 3, "message": "invalid arguments error", "details": [] }'
          }
        }
      }
      responses: {
        key: "401"
        value: {
          description: "Request could not be authenticated (authentication required)."
          schema: { json_schema: { ref: ".google.rpc.Status" } }
          examples: {
            key: "application/json"
            value: '{ "code": 16, "message": "not authenticated", "details": [] }'
          }
        }
      }
      responses: {
        key: "403"
        value: {
          description: "Request does not have permission to access the resource."
          schema: { json_schema: { ref: ".google.rpc.Status" } }
          examples: {
            key: "application/json"
            value: '{ "code": 7, "message": "not authorized", "details": [] }'
          }
        }
      }
    };
  }
  rpc ListEnabledFeatures(ListEnabledFeaturesRequest)
      returns (ListEnabledFeaturesResponse) {}
  rpc CreateFeature(CreateFeatureRequest) returns (CreateFeatureResponse) {
    option (google.api.http) = {
      post: "/v1/feature"
      body: "*"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      summary: "Create Feature Flag",
      description: "Create a feature flag. To call this API, you need at least a MEMBER role in the specified organizations.",
      tags: "Feature",
      operation_id: "web.v1.feature.create",
      responses: {
        key: "400"
        value: {
          description: "Returned for bad requests that may have failed validation."
          schema: { json_schema: { ref: ".google.rpc.Status" } }
          examples: {
            key: "application/json"
            value: '{ "code": 3, "message": "invalid arguments error", "details": [] }'
          }
        }
      }
      responses: {
        key: "401"
        value: {
          description: "Request could not be authenticated (authentication required)."
          schema: { json_schema: { ref: ".google.rpc.Status" } }
          examples: {
            key: "application/json"
            value: '{ "code": 16, "message": "not authenticated", "details": [] }'
          }
        }
      }
    };
  }
  rpc UpdateFeature(UpdateFeatureRequest) returns (UpdateFeatureResponse) {
    option (google.api.http) = {
      patch: "/v1/feature"
      body: "*"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      summary: "Update Feature Flag",
      description: "Update a feature flag. To call this API, you need at least a MEMBER role in the specified organizations.",
      tags: "Feature",
      operation_id: "web.v1.feature.update",
      responses: {
        key: "400"
        value: {
          description: "Returned for bad requests that may have failed validation."
          schema: { json_schema: { ref: ".google.rpc.Status" } }
          examples: {
            key: "application/json"
            value: '{ "code": 3, "message": "invalid arguments error", "details": [] }'
          }
        }
      }
      responses: {
        key: "401"
        value: {
          description: "Request could not be authenticated (authentication required)."
          schema: { json_schema: { ref: ".google.rpc.Status" } }
          examples: {
            key: "application/json"
            value: '{ "code": 16, "message": "not authenticated", "details": [] }'
          }
        }
      }
      responses: {
        key: "404"
        value: {
          description: "Returned when the resource is not found."
          schema: { json_schema: { ref: ".google.rpc.Status" } }
          examples: {
            key: "application/json"
            value: '{ "code": 5, "message": "not found", "details": [] }'
          }
        }
      }
    };
  }
  rpc ScheduleFlagChange(ScheduleFlagChangeRequest)
      returns (ScheduleFlagChangeResponse) {
    option (google.api.http) = {
      post: "/v1/schedule_flag"
      body: "*"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      summary: "Schedule Feature Change",
      description: "Schedule a feature flag change. To call this API, you need an EDITOR role in the specified environment.",
      tags: "Feature",
      operation_id: "web.v1.schedule_flag.create",
      responses: {
        key: "400"
        value: {
          description: "Returned for bad requests that may have failed validation."
          schema: { json_schema: { ref: ".google.rpc.Status" } }
          examples: {
            key: "application/json"
            value: '{ "code": 3, "message": "invalid arguments error", "details": [] }'
          }
        }
      }
      responses: {
        key: "401"
        value: {
          description: "Request could not be authenticated (authentication required)."
          schema: { json_schema: { ref: ".google.rpc.Status" } }
          examples: {
            key: "application/json"
            value: '{ "code": 16, "message": "not authenticated", "details": [] }'
          }
        }
      }
      responses: {
        key: "404"
        value: {
          description: "Returned when the resource is not found."
          schema: { json_schema: { ref: ".google.rpc.Status" } }
          examples: {
            key: "application/json"
            value: '{ "code": 5, "message": "not found", "details": [] }'
          }
        }
      }
    };
  }
  rpc UpdateScheduledFlagChange(UpdateScheduledFlagChangeRequest)
      returns (UpdateScheduledFlagChangeResponse) {
    option (google.api.http) = {
      patch: "/v1/schedule_flag"
      body: "*"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      summary: "Update Scheduled Feature Change",
      description: "Update a scheduled feature flag change. To call this API, you need an EDITOR role in the specified environment.",
      tags: "Feature",
      operation_id: "web.v1.schedule_flag.update",
      responses: {
        key: "400"
        value: {
          description: "Returned for bad requests that may have failed validation."
          schema: { json_schema: { ref: ".google.rpc.Status" } }
          examples: {
            key: "application/json"
            value: '{ "code": 3, "message": "invalid arguments error", "details": [] }'
          }
        }
      }
      responses: {
        key: "401"
        value: {
          description: "Request could not be authenticated (authentication required)."
          schema: { json_schema: { ref: ".google.rpc.Status" } }
          examples: {
            key: "application/json"
            value: '{ "code": 16, "message": "not authenticated", "details": [] }'
          }
        }
      }
      responses: {
        key: "404"
        value: {
          description: "Returned when the resource is not found."
          schema: { json_schema: { ref: ".google.rpc.Status" } }
          examples: {
            key: "application/json"
            value: '{ "code": 5, "message": "not found", "details": [] }'
          }
        }
      }
    };
  }
  rpc DeleteScheduledFlagChange(DeleteScheduledFlagChangeRequest)
      returns (DeleteScheduledFlagChangeResponse) {
    option (google.api.http) = {
      delete: "/v1/schedule_flag"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      summary: "Delete Scheduled Feature Change",
      description: "Delete a scheduled feature flag change. To call this API, you need an EDITOR role in the specified environment.",
      tags: "Feature",
      operation_id: "web.v1.schedule_flag.delete",
      responses: {
        key: "400"
        value: {
          description: "Returned for bad requests that may have failed validation."
          schema: { json_schema: { ref: ".google.rpc.Status" } }
          examples: {
            key: "application/json"
            value: '{ "code": 3, "message": "invalid arguments error", "details": [] }'
          }
        }
      }
      responses: {
        key: "401"
        value: {
          description: "Request could not be authenticated (authentication required)."
          schema: { json_schema: { ref: ".google.rpc.Status" } }
          examples: {
            key: "application/json"
            value: '{ "code": 16, "message": "not authenticated", "details": [] }'
          }
        }
      }
      responses: {
        key: "404"
        value: {
          description: "Returned when the resource is not found."
          schema: { json_schema: { ref: ".google.rpc.Status" } }
          examples: {
            key: "application/json"
            value: '{ "code": 5, "message": "not found", "details": [] }'
          }
        }
      }
    };
  }
  rpc ListScheduledFlagChanges(ListScheduledFlagChangesRequest)
      returns (ListScheduledFlagChangesResponse) {
    option (google.api.http) = {
      get: "/v1/schedule_flags"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      summary: "List Scheduled Feature Changes",
      description: "List scheduled feature flag changes. To call this API, you need at least a MEMBER role in the specified organizations.",
      tags: "Feature",
      operation_id: "web.v1.schedule_flag.update",
      responses: {
        key: "400"
        value: {
          description: "Returned for bad requests that may have failed validation."
          schema: { json_schema: { ref: ".google.rpc.Status" } }
          examples: {
            key: "application/json"
            value: '{ "code": 3, "message": "invalid arguments error", "details": [] }'
          }
        }
      }
      responses: {
        key: "401"
        value: {
          description: "Request could not be authenticated (authentication required)."
          schema: { json_schema: { ref: ".google.rpc.Status" } }
          examples: {
            key: "application/json"
            value: '{ "code": 16, "message": "not authenticated", "details": [] }'
          }
        }
      }
      responses: {
        key: "404"
        value: {
          description: "Returned when the resource is not found."
          schema: { json_schema: { ref: ".google.rpc.Status" } }
          examples: {
            key: "application/json"
            value: '{ "code": 5, "message": "not found", "details": [] }'
          }
        }
      }
    };
  }
  rpc EnableFeature(EnableFeatureRequest) returns (EnableFeatureResponse) {
    option deprecated = true;
  }
  rpc DisableFeature(DisableFeatureRequest) returns (DisableFeatureResponse) {
    option deprecated = true;
  }
  rpc ArchiveFeature(ArchiveFeatureRequest) returns (ArchiveFeatureResponse) {
    option deprecated = true;
  }
  rpc UnarchiveFeature(UnarchiveFeatureRequest)
      returns (UnarchiveFeatureResponse) {
    option deprecated = true;
  }
  rpc DeleteFeature(DeleteFeatureRequest) returns (DeleteFeatureResponse) {}
  rpc UpdateFeatureDetails(UpdateFeatureDetailsRequest)
      returns (UpdateFeatureDetailsResponse) {}
  rpc UpdateFeatureVariations(UpdateFeatureVariationsRequest)
      returns (UpdateFeatureVariationsResponse) {}
  rpc UpdateFeatureTargeting(UpdateFeatureTargetingRequest)
      returns (UpdateFeatureTargetingResponse) {}
  rpc CloneFeature(CloneFeatureRequest) returns (CloneFeatureResponse) {
    option (google.api.http) = {
      post: "/v1/feature/clone"
      body: "*"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      summary: "Clone Feature Flag",
      description: "Clone a feature flag. To call this API, you need an EDITOR role in the specified environment.",
      tags: "Feature",
      operation_id: "web.v1.feature.clone",
      responses: {
        key: "400"
        value: {
          description: "Returned for bad requests that may have failed validation."
          schema: { json_schema: { ref: ".google.rpc.Status" } }
          examples: {
            key: "application/json"
            value: '{ "code": 3, "message": "invalid arguments error", "details": [] }'
          }
        }
      }
      responses: {
        key: "401"
        value: {
          description: "Request could not be authenticated (authentication required)."
          schema: { json_schema: { ref: ".google.rpc.Status" } }
          examples: {
            key: "application/json"
            value: '{ "code": 16, "message": "not authenticated", "details": [] }'
          }
        }
      }
      responses: {
        key: "404"
        value: {
          description: "Returned when the resource is not found."
          schema: { json_schema: { ref: ".google.rpc.Status" } }
          examples: {
            key: "application/json"
            value: '{ "code": 5, "message": "not found", "details": [] }'
          }
        }
      }
    };
  }

  rpc CreateSegment(CreateSegmentRequest) returns (CreateSegmentResponse) {
    option (google.api.http) = {
      post: "/v1/segment"
      body: "*"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      summary: "Create",
      description: "Create a segment."
      tags: "segment"
      operation_id: "web.v1.segment.create"
      responses: {
        key: "400"
        value: {
          description: "Returned for bad requests that may have failed validation."
          schema: { json_schema: { ref: ".google.rpc.Status" } }
          examples: {
            key: "application/json"
            value: '{ "code": 3, "message": "invalid arguments error", "details": [] }'
          }
        }
      }
      responses: {
        key: "401"
        value: {
          description: "Request could not be authenticated (authentication required)."
          schema: { json_schema: { ref: ".google.rpc.Status" } }
          examples: {
            key: "application/json"
            value: '{ "code": 16, "message": "not authenticated", "details": [] }'
          }
        }
      }
    };
  }
  rpc GetSegment(GetSegmentRequest) returns (GetSegmentResponse) {
    option (google.api.http) = {
      get: "/v1/segment"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      summary: "Get",
      description: "Get a segment."
      tags: "segment"
      operation_id: "web.v1.segment.get"
      responses: {
        key: "400"
        value: {
          description: "Returned for bad requests that may have failed validation."
          schema: { json_schema: { ref: ".google.rpc.Status" } }
          examples: {
            key: "application/json"
            value: '{ "code": 3, "message": "invalid arguments error", "details": [] }'
          }
        }
      }
      responses: {
        key: "401"
        value: {
          description: "Request could not be authenticated (authentication required)."
          schema: { json_schema: { ref: ".google.rpc.Status" } }
          examples: {
            key: "application/json"
            value: '{ "code": 16, "message": "not authenticated", "details": [] }'
          }
        }
      }
    };
  }
  rpc ListSegments(ListSegmentsRequest) returns (ListSegmentsResponse) {
    option (google.api.http) = {
      get: "/v1/segments"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      summary: "List",
      description: "List segments."
      tags: "segment"
      operation_id: "web.v1.segment.list"
      responses: {
        key: "400"
        value: {
          description: "Returned for bad requests that may have failed validation."
          schema: { json_schema: { ref: ".google.rpc.Status" } }
          examples: {
            key: "application/json"
            value: '{ "code": 3, "message": "invalid arguments error", "details": [] }'
          }
        }
      }
      responses: {
        key: "401"
        value: {
          description: "Request could not be authenticated (authentication required)."
          schema: { json_schema: { ref: ".google.rpc.Status" } }
          examples: {
            key: "application/json"
            value: '{ "code": 16, "message": "not authenticated", "details": [] }'
          }
        }
      }
    };
  }
  rpc DeleteSegment(DeleteSegmentRequest) returns (DeleteSegmentResponse) {
    option (google.api.http) = {
      delete: "/v1/segment"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      summary: "Delete",
      description: "Delete a segment."
      tags: "segment"
      operation_id: "web.v1.segment.delete"
      responses: {
        key: "400"
        value: {
          description: "Returned for bad requests that may have failed validation."
          schema: { json_schema: { ref: ".google.rpc.Status" } }
          examples: {
            key: "application/json"
            value: '{ "code": 3, "message": "invalid arguments error", "details": [] }'
          }
        }
      }
      responses: {
        key: "401"
        value: {
          description: "Request could not be authenticated (authentication required)."
          schema: { json_schema: { ref: ".google.rpc.Status" } }
          examples: {
            key: "application/json"
            value: '{ "code": 16, "message": "not authenticated", "details": [] }'
          }
        }
      }
    };
  }
  rpc UpdateSegment(UpdateSegmentRequest) returns (UpdateSegmentResponse) {
    option (google.api.http) = {
      patch: "/v1/segment"
      body: "*"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      summary: "Update",
      description: "Update a segment."
      tags: "segment"
      operation_id: "web.v1.segment.update"
      responses: {
        key: "400"
        value: {
          description: "Returned for bad requests that may have failed validation."
          schema: { json_schema: { ref: ".google.rpc.Status" } }
          examples: {
            key: "application/json"
            value: '{ "code": 3, "message": "invalid arguments error", "details": [] }'
          }
        }
      }
      responses: {
        key: "401"
        value: {
          description: "Request could not be authenticated (authentication required)."
          schema: { json_schema: { ref: ".google.rpc.Status" } }
          examples: {
            key: "application/json"
            value: '{ "code": 16, "message": "not authenticated", "details": [] }'
          }
        }
      }
    };
  }
  rpc ListSegmentUsers(ListSegmentUsersRequest)
      returns (ListSegmentUsersResponse) {}
  rpc BulkUploadSegmentUsers(BulkUploadSegmentUsersRequest)
      returns (BulkUploadSegmentUsersResponse) {
    option (google.api.http) = {
      post: "/v1/segment_users/bulk_upload"
      body: "*"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      summary: "Bulk upload",
      description: "Bulk upload segment users."
      tags: "segment"
      operation_id: "web.v1.segment_users.bulk_upload"
      responses: {
        key: "400"
        value: {
          description: "Returned for bad requests that may have failed validation."
          schema: { json_schema: { ref: ".google.rpc.Status" } }
          examples: {
            key: "application/json"
            value: '{ "code": 3, "message": "invalid arguments error", "details": [] }'
          }
        }
      }
      responses: {
        key: "401"
        value: {
          description: "Request could not be authenticated (authentication required)."
          schema: { json_schema: { ref: ".google.rpc.Status" } }
          examples: {
            key: "application/json"
            value: '{ "code": 16, "message": "not authenticated", "details": [] }'
          }
        }
      }
    };
  }
  rpc BulkDownloadSegmentUsers(BulkDownloadSegmentUsersRequest)
      returns (BulkDownloadSegmentUsersResponse) {
    option (google.api.http) = {
      get: "/v1/segment_users/bulk_download"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      summary: "Bulk download",
      description: "Bulk download segment users."
      tags: "segment"
      operation_id: "web.v1.segment_users.bulk_download"
      responses: {
        key: "400"
        value: {
          description: "Returned for bad requests that may have failed validation."
          schema: { json_schema: { ref: ".google.rpc.Status" } }
          examples: {
            key: "application/json"
            value: '{ "code": 3, "message": "invalid arguments error", "details": [] }'
          }
        }
      }
      responses: {
        key: "401"
        value: {
          description: "Request could not be authenticated (authentication required)."
          schema: { json_schema: { ref: ".google.rpc.Status" } }
          examples: {
            key: "application/json"
            value: '{ "code": 16, "message": "not authenticated", "details": [] }'
          }
        }
      }
    };
  }
  rpc EvaluateFeatures(EvaluateFeaturesRequest)
      returns (EvaluateFeaturesResponse) {}
  rpc DebugEvaluateFeatures(DebugEvaluateFeaturesRequest)
      returns (DebugEvaluateFeaturesResponse) {
    option (google.api.http) = {
      post: "/v1/debug_evaluate_features"
      body: "*"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      summary: "Debug Feature Evaluations",
      description: "Debug Evaluate features for multiple features and users."
      tags: "feature"
      operation_id: "web.v1.feature.debug_evaluate_feature"
      responses: {
        key: "400"
        value: {
          description: "Returned for bad requests that may have failed validation."
          schema: { json_schema: { ref: ".google.rpc.Status" } }
          examples: {
            key: "application/json"
            value: '{ "code": 3, "message": "invalid arguments error", "details": [] }'
          }
        }
      }
      responses: {
        key: "401"
        value: {
          description: "Request could not be authenticated (authentication required)."
          schema: { json_schema: { ref: ".google.rpc.Status" } }
          examples: {
            key: "application/json"
            value: '{ "code": 16, "message": "not authenticated", "details": [] }'
          }
        }
      }
      responses: {
        key: "404"
        value: {
          description: "Returned when the resource is not found."
          schema: { json_schema: { ref: ".google.rpc.Status" } }
          examples: {
            key: "application/json"
            value: '{ "code": 5, "message": "not found", "details": [] }'
          }
        }
      }
    };
  }
  rpc ListTags(ListTagsRequest) returns (ListTagsResponse) {}
  rpc CreateFlagTrigger(CreateFlagTriggerRequest)
      returns (CreateFlagTriggerResponse) {
    option (google.api.http) = {
      post: "/v1/flag_trigger"
      body: "*"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      summary: "Create Flag Trigger",
      description: "Create a flag trigger. To call this API, you need an EDITOR role in the specified environment.",
      tags: "Flag Trigger",
      operation_id: "web.v1.flag_trigger.create",
      responses: {
        key: "400"
        value: {
          description: "Returned for bad requests that may have failed validation."
          schema: { json_schema: { ref: ".google.rpc.Status" } }
          examples: {
            key: "application/json"
            value: '{ "code": 3, "message": "invalid arguments error", "details": [] }'
          }
        }
      }
      responses: {
        key: "401"
        value: {
          description: "Request could not be authenticated (authentication required)."
          schema: { json_schema: { ref: ".google.rpc.Status" } }
          examples: {
            key: "application/json"
            value: '{ "code": 16, "message": "not authenticated", "details": [] }'
          }
        }
      }
      responses: {
        key: "404"
        value: {
          description: "Returned when the resource is not found."
          schema: { json_schema: { ref: ".google.rpc.Status" } }
          examples: {
            key: "application/json"
            value: '{ "code": 5, "message": "not found", "details": [] }'
          }
        }
      }
    };
  }
  rpc UpdateFlagTrigger(UpdateFlagTriggerRequest)
      returns (UpdateFlagTriggerResponse) {
    option (google.api.http) = {
      patch: "/v1/flag_trigger"
      body: "*"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      summary: "Update Flag Trigger",
      description: "Update a flag trigger. To call this API, you need an EDITOR role in the specified environment.",
      tags: "Flag Trigger",
      operation_id: "web.v1.flag_trigger.update",
      responses: {
        key: "400"
        value: {
          description: "Returned for bad requests that may have failed validation."
          schema: { json_schema: { ref: ".google.rpc.Status" } }
          examples: {
            key: "application/json"
            value: '{ "code": 3, "message": "invalid arguments error", "details": [] }'
          }
        }
      }
      responses: {
        key: "401"
        value: {
          description: "Request could not be authenticated (authentication required)."
          schema: { json_schema: { ref: ".google.rpc.Status" } }
          examples: {
            key: "application/json"
            value: '{ "code": 16, "message": "not authenticated", "details": [] }'
          }
        }
      }
      responses: {
        key: "404"
        value: {
          description: "Returned when the resource is not found."
          schema: { json_schema: { ref: ".google.rpc.Status" } }
          examples: {
            key: "application/json"
            value: '{ "code": 5, "message": "not found", "details": [] }'
          }
        }
      }
    };
  }
  rpc EnableFlagTrigger(EnableFlagTriggerRequest)
      returns (EnableFlagTriggerResponse) {}
  rpc DisableFlagTrigger(DisableFlagTriggerRequest)
      returns (DisableFlagTriggerResponse) {}
  rpc ResetFlagTrigger(ResetFlagTriggerRequest)
      returns (ResetFlagTriggerResponse) {}
  rpc DeleteFlagTrigger(DeleteFlagTriggerRequest)
      returns (DeleteFlagTriggerResponse) {
    option (google.api.http) = {
      delete: "/v1/flag_trigger"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      summary: "Delete Flag Trigger",
      description: "Delete a flag trigger. To call this API, you need an EDITOR role in the specified environment.",
      tags: "Flag Trigger",
      operation_id: "web.v1.flag_trigger.delete",
      responses: {
        key: "400"
        value: {
          description: "Returned for bad requests that may have failed validation."
          schema: { json_schema: { ref: ".google.rpc.Status" } }
          examples: {
            key: "application/json"
            value: '{ "code": 3, "message": "invalid arguments error", "details": [] }'
          }
        }
      }
      responses: {
        key: "401"
        value: {
          description: "Request could not be authenticated (authentication required)."
          schema: { json_schema: { ref: ".google.rpc.Status" } }
          examples: {
            key: "application/json"
            value: '{ "code": 16, "message": "not authenticated", "details": [] }'
          }
        }
      }
      responses: {
        key: "404"
        value: {
          description: "Returned when the resource is not found."
          schema: { json_schema: { ref: ".google.rpc.Status" } }
          examples: {
            key: "application/json"
            value: '{ "code": 5, "message": "not found", "details": [] }'
          }
        }
      }
    };
  }
  rpc GetFlagTrigger(GetFlagTriggerRequest) returns (GetFlagTriggerResponse) {
    option (google.api.http) = {
      get: "/v1/flag_trigger"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      summary: "Get Flag Trigger",
      description: "Get a flag trigger. To call this API, you need at least a MEMBER role in the specified organizations.",
      tags: "Flag Trigger",
      operation_id: "web.v1.flag_trigger.get",
      responses: {
        key: "400"
        value: {
          description: "Returned for bad requests that may have failed validation."
          schema: { json_schema: { ref: ".google.rpc.Status" } }
          examples: {
            key: "application/json"
            value: '{ "code": 3, "message": "invalid arguments error", "details": [] }'
          }
        }
      }
      responses: {
        key: "401"
        value: {
          description: "Request could not be authenticated (authentication required)."
          schema: { json_schema: { ref: ".google.rpc.Status" } }
          examples: {
            key: "application/json"
            value: '{ "code": 16, "message": "not authenticated", "details": [] }'
          }
        }
      }
      responses: {
        key: "404"
        value: {
          description: "Returned when the resource is not found."
          schema: { json_schema: { ref: ".google.rpc.Status" } }
          examples: {
            key: "application/json"
            value: '{ "code": 5, "message": "not found", "details": [] }'
          }
        }
      }
    };
  }
  rpc ListFlagTriggers(ListFlagTriggersRequest)
      returns (ListFlagTriggersResponse) {
    option (google.api.http) = {
      get: "/v1/flag_triggers"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      summary: "List Flag Triggers",
      description: "List flag triggers. To call this API, you need at least a MEMBER role in the specified organizations.",
      tags: "Flag Trigger",
      operation_id: "web.v1.flag_trigger.list",
      responses: {
        key: "400"
        value: {
          description: "Returned for bad requests that may have failed validation."
          schema: { json_schema: { ref: ".google.rpc.Status" } }
          examples: {
            key: "application/json"
            value: '{ "code": 3, "message": "invalid arguments error", "details": [] }'
          }
        }
      }
      responses: {
        key: "401"
        value: {
          description: "Request could not be authenticated (authentication required)."
          schema: { json_schema: { ref: ".google.rpc.Status" } }
          examples: {
            key: "application/json"
            value: '{ "code": 16, "message": "not authenticated", "details": [] }'
          }
        }
      }
    };
  }
  rpc GetUserAttributeKeys(GetUserAttributeKeysRequest)
      returns (GetUserAttributeKeysResponse) {
    option (google.api.http) = {
      get: "/v1/feature/user-attribute-keys"
    };
    option (grpc.gateway.protoc_gen_openapiv2.options.openapiv2_operation) = {
      summary: "Get User Attribute Keys",
      description: "Get all user attribute keys for the specified environment. To call this API, you need at least a MEMBER role in the specified organizations.",
      tags: "Feature",
      operation_id: "web.v1.feature.getUserAttributeKeys",
      responses: {
        key: "400"
        value: {
          description: "Returned for bad requests that may have failed validation."
          schema: { json_schema: { ref: ".google.rpc.Status" } }
          examples: {
            key: "application/json"
            value: '{ "code": 3, "message": "invalid arguments error", "details": [] }'
          }
        }
      }
      responses: {
        key: "401"
        value: {
          description: "Request could not be authenticated (authentication required)."
          schema: { json_schema: { ref: ".google.rpc.Status" } }
          examples: {
            key: "application/json"
            value: '{ "code": 16, "message": "not authenticated", "details": [] }'
          }
        }
      }
      responses: {
        key: "403"
        value: {
          description: "Request was authenticated but forbidden (authorization required)."
          schema: { json_schema: { ref: ".google.rpc.Status" } }
          examples: {
            key: "application/json"
            value: '{ "code": 7, "message": "permission denied", "details": [] }'
          }
        }
      }
      responses: {
        key: "500"
        value: {
          description: "An unexpected error occurred."
          schema: { json_schema: { ref: ".google.rpc.Status" } }
          examples: {
            key: "application/json"
            value: '{ "code": 13, "message": "internal error", "details": [] }'
          }
        }
      }
    };
  }
  rpc FlagTriggerWebhook(FlagTriggerWebhookRequest)
      returns (FlagTriggerWebhookResponse) {
    option (google.api.http) = {
      post: "/webhook/triggers/{token}"
    };
  }
}
