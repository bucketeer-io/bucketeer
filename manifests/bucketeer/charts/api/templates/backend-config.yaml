{{- if .Values.env.gcpEnabled }}
apiVersion: cloud.google.com/v1beta1
kind: BackendConfig
metadata:
  name: {{ template "api.fullname" . }}
  namespace: {{ .Values.namespace }}
spec:
  healthCheck:
    requestPath: /health
    type: HTTP2
    checkIntervalSec: 5
    timeoutSec: 5
    healthyThreshold: 1
    unhealthyThreshold: 1
  timeoutSec: 60
  connectionDraining:
    drainingTimeoutSec: 60
{{- end }}