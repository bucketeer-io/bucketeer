global:
  image:
    tag: v2.1.1 # x-release-please-version
    imagePullSecrets: # Used by all services including migration
  # Global data warehouse configuration
  dataWarehouse:
    # Data warehouse type configuration
    # Supported types: bigquery, mysql
    type: bigquery # Options: bigquery, mysql, postgres
    batchSize: 1000
    timezone: "UTC"
    # BigQuery configuration (used when type: bigquery)
    bigquery:
      project: ""
      dataset: ""
      location: ""
    # MySQL configuration (used when type: mysql)
    mysql:
      useMainConnection: true
      host: ""
      port: 3306
      user: ""
      password: ""
      database: ""
    # PostgresQL configuration (used when type: postgres)
    postgres:
      useMainConnection: true
      host: ""
      port: 5432
      user: ""
      password: ""
      database: ""
  pubsub:
    # Type of pubsub to use: redis-stream or google
    type: ""
    # Redis configuration (used when type is redis-stream)
    redis:
      # Redis server name
      serverName: ""
      # Redis server address
      addr: ""
      # Connection pool size
      poolSize: 25
      # Minimum number of idle connections
      minIdle: 25
      # Redis stream partition count
      partitionCount: 16
    # PubSub emulator host (for local development)
    emulatorHost: ""
    # Google Cloud project ID
    project: ""
  # Global email configuration
  email:
    enabled: false
    provider: smtp
    smtp:
      host: smtp.gmail.com
      port: 587
      username: bucketeer@example.com
      password: ""
    sendgrid:
      apiKey: ""
    ses:
      region: ""
      accessKey: ""
      secretKey: ""
    mailersend:
      apiKey: ""
    sender:
      email: bucketeer@example.com
      name: Bucketeer
    baseURL: https://localhost
    templates:
      en:
        welcome:
          subject: "You've been invited to join Bucketeer"
          body: '<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="x-apple-disable-message-reformatting"><title>You''ve been invited to join Bucketeer</title></head><body style="margin:0;padding:0;background:#f5f5f5;color:#333;font-family:-apple-system,BlinkMacSystemFont,''Segoe UI'',Roboto,Helvetica,Arial,sans-serif;line-height:1.6;"><div style="display:none;overflow:hidden;line-height:1px;opacity:0;max-height:0;max-width:0;">Sign in with the authentication method configured for your account.</div><table role="presentation" cellspacing="0" cellpadding="0" border="0" width="100%"><tr><td align="center" style="padding:24px 12px;"><table role="presentation" cellspacing="0" cellpadding="0" border="0" width="600" style="width:100%;max-width:600px;background:#ffffff;border-radius:8px;overflow:hidden;box-shadow:0 2px 8px rgba(0,0,0,0.08);"><tr><td style="padding:32px;background:#ffffff;"><img src="{{webConsoleEndpoint}}/img/bucketeer-logo-primary.png" alt="Bucketeer" width="205" height="48" style="display:block;margin-bottom:24px;" /><p style="margin:0 0 16px 0;font-size:15px;color:#4b5563;">Hello, {{userEmail}}.</p><p style="margin:0 0 16px 0;font-size:15px;color:#4b5563;">You''ve been invited to join <strong>Bucketeer</strong>, a feature flag and A/B testing platform.</p><p style="margin:0 0 20px 0;font-size:15px;color:#4b5563;">Use the link below to access the Bucketeer console and sign in with the authentication method configured for your account.</p><table role="presentation" cellspacing="0" cellpadding="0" border="0" style="margin:0 0 20px 0;"><tr><td align="center"><a href="{{webConsoleEndpoint}}" style="background:#5B21B6;color:#ffffff;text-decoration:none;padding:14px 32px;border-radius:6px;display:inline-block;font-weight:600;font-size:15px;">Open Bucketeer Console</a></td></tr></table><p style="margin:0 0 8px 0;font-size:13px;color:#4b5563;">Or copy and paste this link into your browser:</p><table role="presentation" cellspacing="0" cellpadding="0" border="0" width="100%" style="margin:0 0 24px 0;"><tr><td style="padding:12px 16px;background:#f9fafb;border:1px solid #e5e7eb;border-radius:6px;word-break:break-all;font-size:13px;color:#4b5563;">{{webConsoleEndpoint}}</td></tr></table><p style="margin:16px 0 0 0;font-size:14px;color:#4b5563;">Bucketeer Team.</p></td></tr></table></td></tr></table></body></html>'
      ja:
        welcome:
          subject: "Bucketeerへのご招待"
          body: '<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="x-apple-disable-message-reformatting"><title>Bucketeerへのご招待</title></head><body style="margin:0;padding:0;background:#f5f5f5;color:#333;font-family:-apple-system,BlinkMacSystemFont,''Segoe UI'',Roboto,Helvetica,Arial,sans-serif;line-height:1.6;"><div style="display:none;overflow:hidden;line-height:1px;opacity:0;max-height:0;max-width:0;">アカウントに設定されている認証方法でサインインしてください。</div><table role="presentation" cellspacing="0" cellpadding="0" border="0" width="100%"><tr><td align="center" style="padding:24px 12px;"><table role="presentation" cellspacing="0" cellpadding="0" border="0" width="600" style="width:100%;max-width:600px;background:#ffffff;border-radius:8px;overflow:hidden;box-shadow:0 2px 8px rgba(0,0,0,0.08);"><tr><td style="padding:32px;background:#ffffff;"><img src="{{webConsoleEndpoint}}/img/bucketeer-logo-primary.png" alt="Bucketeer" width="205" height="48" style="display:block;margin-bottom:24px;" /><p style="margin:0 0 16px 0;font-size:15px;color:#4b5563;">{{userEmail}} 様、</p><p style="margin:0 0 16px 0;font-size:15px;color:#4b5563;">フィーチャーフラグ & A/B テストプラットフォーム「<strong>Bucketeer</strong>」への招待が届いています。</p><p style="margin:0 0 20px 0;font-size:15px;color:#4b5563;">以下のボタンよりコンソールへアクセスし、アカウントに設定されている認証方法でサインインしてください。</p><table role="presentation" cellspacing="0" cellpadding="0" border="0" style="margin:0 0 20px 0;"><tr><td align="center"><a href="{{webConsoleEndpoint}}" style="background:#5B21B6;color:#ffffff;text-decoration:none;padding:14px 32px;border-radius:6px;display:inline-block;font-weight:600;font-size:15px;">Bucketeer コンソールを開く</a></td></tr></table><p style="margin:0 0 8px 0;font-size:13px;color:#4b5563;">または、このリンクをブラウザにコピー＆ペーストしてください：</p><table role="presentation" cellspacing="0" cellpadding="0" border="0" width="100%" style="margin:0 0 24px 0;"><tr><td style="padding:12px 16px;background:#f9fafb;border:1px solid #e5e7eb;border-radius:6px;word-break:break-all;font-size:13px;color:#4b5563;">{{webConsoleEndpoint}}</td></tr></table><p style="margin:16px 0 0 0;font-size:14px;color:#4b5563;">Bucketeerチーム</p></td></tr></table></td></tr></table></body></html>'

migration:
  image:
    repository: ghcr.io/bucketeer-io/bucketeer-migration
    tag: v2.1.1 # x-release-please-version
  # imagePullSecrets: []  # Optional: Override global.image.imagePullSecrets for migration only

  backoffLimit: 0
  ttlSecondsAfterFinished:

  # URL to access the DB to do the migration
  # E.g. mysql://user:password@host:port/db_name
  dbUrl:

  # The migration baseline
  # First revision
  dbBaseline: "20240626022133"
